<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Boss Battle</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #111;
            font-family: Arial, sans-serif;
            overflow: hidden;
            color: white;
        }
        
        #game-container {
            position: relative;
            width: 600px;
            height: 400px;
            background: #000;
            border: 2px solid #444;
            overflow: hidden;
        }
        
        #player {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #00ff00;
            border-radius: 50%;
            bottom: 20px;
            left: 285px;
        }
        
        #boss {
            position: absolute;
            width: 80px;
            height: 80px;
            background: #ff0000;
            border-radius: 50%;
            top: 50px;
            left: 260px;
            transition: transform 0.1s;
        }
        
        .boss-health-bar {
            position: absolute;
            width: 200px;
            height: 20px;
            background: #333;
            top: 10px;
            left: 200px;
            border: 2px solid #555;
        }
        
        #boss-health {
            height: 100%;
            width: 100%;
            background: #ff5555;
            transition: width 0.3s;
        }
        
        .player-health-bar {
            position: absolute;
            width: 200px;
            height: 20px;
            background: #333;
            bottom: 10px;
            left: 200px;
            border: 2px solid #555;
        }
        
        #player-health {
            height: 100%;
            width: 100%;
            background: #55ff55;
            transition: width 0.3s;
        }
        
        .bullet {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffff00;
            border-radius: 50%;
        }
        
        .enemy-bullet {
            position: absolute;
            width: 50px;
            height: 50px;
            background: #ff5555;
            border-radius: 50%;
        }
        
        #game-over, #game-win {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            display: none;
        }
        
        #restart-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: #4CAF50;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
        }
        
        #restart-btn:hover {
            background: #45a049;
        }
        
        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="boss-health-bar">
            <div id="boss-health"></div>
        </div>
        <div class="player-health-bar">
            <div id="player-health"></div>
        </div>
        <div id="boss"></div>
        <div id="player"></div>
        <div id="score">Score: 0</div>
        
        <div id="game-over">
            GAME OVER
            <button id="restart-btn">Restart</button>
        </div>
        
        <div id="game-win">
            YOU WIN!
            <button id="restart-btn-win">Restart</button>
        </div>
    </div>

    <script>
        // Игровые элементы
        const player = document.getElementById('player');
        const boss = document.getElementById('boss');
        const bossHealthBar = document.getElementById('boss-health');
        const playerHealthBar = document.getElementById('player-health');
        const gameContainer = document.getElementById('game-container');
        const gameOverScreen = document.getElementById('game-over');
        const gameWinScreen = document.getElementById('game-win');
        const restartBtn = document.getElementById('restart-btn');
        const restartBtnWin = document.getElementById('restart-btn-win');
        const scoreElement = document.getElementById('score');
        
        // Игровые переменные
        let playerX = 285;
        let playerY = 350;
        let bossX = 260;
        let bossY = 50;
        let bossHealth = 100;
        let playerHealth = 1;
        let score = 0;
        let gameRunning = true;
        let bullets = [];
        let enemyBullets = [];
        let bossSpeed = 3;
        let bossDirection = 1; // 1 - вправо, -1 - влево
        let lastContactDamageTime = 0;
        const contactDamageCooldown = 1000; // 1 секунда
        
        // Обработка нажатий клавиш
        const keys = {
            ArrowLeft: false,
            ArrowRight: false,
            ArrowUp: false,
            ArrowDown: false,
            ' ': false // Пробел для стрельбы
        };
        
        document.addEventListener('keydown', (e) => {
            if (e.key in keys) {
                keys[e.key] = true;
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (e.key in keys) {
                keys[e.key] = false;
            }
        });
        
        // Проверка столкновения с боссом
        function checkBossContact() {
            const currentTime = Date.now();
            if (currentTime - lastContactDamageTime < contactDamageCooldown) return;
            
            if (
                playerY + 30 > bossY &&
                playerY < bossY + 80 &&
                playerX + 30 > bossX &&
                playerX < bossX + 80
            ) {
                // Контакт с боссом
                playerHealth -= 20;
                playerHealthBar.style.width = playerHealth + '%';
                lastContactDamageTime = currentTime;
                
                // Эффект попадания
                player.style.backgroundColor = 'red';
                setTimeout(() => {
                    player.style.backgroundColor = '#00ff00';
                }, 100);
                
                if (playerHealth <= 0) {
                    gameOver();
                }
            }
        }
        
        // Движение игрока
        function movePlayer() {
            const speed = 5;
            
            if (keys.ArrowLeft && playerX > 0) {
                playerX -= speed;
            }
            if (keys.ArrowRight && playerX < 570) {
                playerX += speed;
            }
            if (keys.ArrowUp && playerY > 0) {
                playerY -= speed;
            }
            if (keys.ArrowDown && playerY < 370) {
                playerY += speed;
            }
            
            player.style.left = playerX + 'px';
            player.style.top = playerY + 'px';
            
            // Стрельба (пробел)
            if (keys[' ']) {
                shoot();
                keys[' '] = false; // Чтобы не было слишком частых выстрелов
            }
        }
        
        // Стрельба игрока
        function shoot() {
            if (!gameRunning) return;
            
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.style.left = (playerX + 10) + 'px';
            bullet.style.top = (playerY - 10) + 'px';
            gameContainer.appendChild(bullet);
            
            bullets.push({
                element: bullet,
                x: playerX + 10,
                y: playerY - 10,
                speed: 7
            });
        }
        
        // Движение пуль игрока
        function moveBullets() {
            for (let i = 0; i < bullets.length; i++) {
                const bullet = bullets[i];
                bullet.y -= bullet.speed;
                bullet.element.style.top = bullet.y + 'px';
                
                // Проверка попадания в босса
                if (
                    bullet.y < bossY + 80 &&
                    bullet.y + 10 > bossY &&
                    bullet.x + 10 > bossX &&
                    bullet.x < bossX + 80
                ) {
                    // Попадание!
                    gameContainer.removeChild(bullet.element);
                    bullets.splice(i, 1);
                    i--;
                    
                    bossHealth -= 5;
                    bossHealthBar.style.width = bossHealth + '%';
                    
                    // Эффект попадания
                    boss.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        boss.style.transform = 'scale(1)';
                    }, 100);
                    
                    score += 10;
                    scoreElement.textContent = `Score: ${score}`;
                    
                    if (bossHealth <= 0) {
                        gameWin();
                    }
                }
                
                // Удаление пуль за пределами экрана
                if (bullet.y < -10) {
                    gameContainer.removeChild(bullet.element);
                    bullets.splice(i, 1);
                    i--;
                }
            }
        }
        
        // Движение босса
        function moveBoss() {
            // Движение влево-вправо
            bossX += bossSpeed * bossDirection;
            
            // Проверка границ и изменение направления
            if (bossX <= 0) {
                bossDirection = 1; // Двигаемся вправо
                bossSpeed = 3 + Math.random() * 2; // Случайная скорость
            } else if (bossX >= 520) {
                bossDirection = -1; // Двигаемся влево
                bossSpeed = 3 + Math.random() * 2; // Случайная скорость
            }
            
            boss.style.left = bossX + 'px';
            
            // Случайная стрельба босса
            if (Math.random() < 0.02) {
                bossShoot();
            }
        }
        
        // Стрельба босса
        function bossShoot() {
            if (!gameRunning) return;
            
            const bullet = document.createElement('div');
            bullet.className = 'enemy-bullet';
            bullet.style.left = (bossX + 35) + 'px';
            bullet.style.top = (bossY + 80) + 'px';
            gameContainer.appendChild(bullet);
            
            enemyBullets.push({
                element: bullet,
                x: bossX + 35,
                y: bossY + 80,
                speed: 4
            });
        }
        
        // Движение пуль босса
        function moveEnemyBullets() {
            for (let i = 0; i < enemyBullets.length; i++) {
                const bullet = enemyBullets[i];
                bullet.y += bullet.speed;
                bullet.element.style.top = bullet.y + 'px';
                
                // Проверка попадания в игрока
                if (
                    bullet.y + 10 > playerY &&
                    bullet.y < playerY + 30 &&
                    bullet.x + 10 > playerX &&
                    bullet.x < playerX + 30
                ) {
                    // Попадание!
                    gameContainer.removeChild(bullet.element);
                    enemyBullets.splice(i, 1);
                    i--;
                    
                    playerHealth -= 10;
                    playerHealthBar.style.width = playerHealth + '%';
                    
                    // Эффект попадания
                    player.style.backgroundColor = 'red';
                    setTimeout(() => {
                        player.style.backgroundColor = '#00ff00';
                    }, 100);
                    
                    if (playerHealth <= 0) {
                        gameOver();
                    }
                }
                
                // Удаление пуль за пределами экрана
                if (bullet.y > 410) {
                    gameContainer.removeChild(bullet.element);
                    enemyBullets.splice(i, 1);
                    i--;
                }
            }
        }
        
        // Конец игры (проигрыш)
        function gameOver() {
            gameRunning = false;
            gameOverScreen.style.display = 'flex';
        }
        
        // Победа
        function gameWin() {
            gameRunning = false;
            gameWinScreen.style.display = 'flex';
        }
        
        // Перезапуск игры
        function restartGame() {
            // Очистка пуль
            bullets.forEach(bullet => gameContainer.removeChild(bullet.element));
            enemyBullets.forEach(bullet => gameContainer.removeChild(bullet.element));
            
            // Сброс переменных
            playerX = 285;
            playerY = 350;
            bossX = 260;
            bossY = 50;
            bossHealth = 100;
            playerHealth = 100;
            score = 0;
            bullets = [];
            enemyBullets = [];
            bossSpeed = 3;
            bossDirection = 1;
            gameRunning = true;
            lastContactDamageTime = 0;
            
            // Обновление интерфейса
            player.style.left = playerX + 'px';
            player.style.top = playerY + 'px';
            boss.style.left = bossX + 'px';
            bossHealthBar.style.width = '100%';
            playerHealthBar.style.width = '100%';
            scoreElement.textContent = `Score: ${score}`;
            
            // Скрытие экранов окончания игры
            gameOverScreen.style.display = 'none';
            gameWinScreen.style.display = 'none';
        }
        
        // Игровой цикл
        function gameLoop() {
            if (!gameRunning) return;
            
            movePlayer();
            moveBoss();
            moveBullets();
            moveEnemyBullets();
            checkBossContact();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Назначение кнопок перезапуска
        restartBtn.addEventListener('click', restartGame);
        restartBtnWin.addEventListener('click', restartGame);
        
        // Запуск игры
        gameLoop();
    </script>
</body>
</html>
